<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>ãƒ¡ã‚¤ãƒ‰ã•ã‚“ã¨æ¥½ã—ã‚€å¥å…¨éº»é›€ï½œPOãƒ»TORO</title>
<meta name="description" content="ãƒãƒ»ãƒˆãƒ­æ–°ã‚µãƒ¼ãƒ“ã‚¹ã€‚å…¨è‡ªå‹•éº»é›€å“ã§ãƒ¡ã‚¤ãƒ‰ã•ã‚“ã¨æ¥½ã—ã‚€å¥å…¨éº»é›€ã€‚ã”åˆ©ç”¨æ–¹æ³•ãƒ»æ–™é‡‘ãƒ»ç‚¹æ•°è¡¨ãƒ»å¯¾å±€ãƒ«ãƒ¼ãƒ«ãƒ»æ¡ç”¨å½¹ä¸€è¦§ã‚’æ²è¼‰ã€‚">
<style>
:root{
  --bg:#fbf7fa;
  --card:#ffffff;
  --text:#2f2622;
  --muted:#5f5f5f;
  --accent:#de3f7b;
  --border:#ffd6e7;
  --grad1:#f6b7d2;
  --grad2:#a9d6f7;
}

*{box-sizing:border-box;}
body{
  margin:0;
  font-family:"Noto Sans JP","Hiragino Kaku Gothic ProN","Meiryo",system-ui,-apple-system,Segoe UI,sans-serif;
  background:var(--bg);
  color:var(--text);
  line-height:1.85;
}

header{
  padding:44px 18px 28px;
  text-align:center;
  color:#fff;
  background:linear-gradient(135deg,var(--grad1),var(--grad2));
}
header .badge{
  display:inline-block;
  padding:6px 12px;
  border:1px solid rgba(255,255,255,.45);
  border-radius:999px;
  font-weight:800;
  background:rgba(255,255,255,.12);
}
header h1{
  margin:14px 0 6px;
  font-size:1.65rem;
  font-weight:900;
  letter-spacing:.01em;
}
header p{margin:0; font-weight:700; opacity:.98;}

main{
  max-width:860px;
  margin:0 auto;
  padding:14px 12px 26px;
}

section{
  background:rgba(255,255,255,.92);
  border:1px solid var(--border);
  border-radius:16px;
  padding:22px 18px;
  margin:12px 0;
  box-shadow:0 10px 22px rgba(0,0,0,.05);
}

h2{
  margin:0 0 12px;
  color:var(--accent);
  font-size:1.12rem;
  font-weight:900;
  letter-spacing:.01em;
  padding-bottom:8px;
  border-bottom:1px dashed rgba(222,63,123,.25);
}

p{margin:0 0 10px;}
ul{margin:8px 0 0 1.2em; padding:0;}

.checks{
  list-style:none;
  padding:0;
  margin:10px 0 0;
}
.checks li{
  margin:6px 0;
  padding-left:26px;
  position:relative;
}
.checks li::before{
  content:"âœ”";
  position:absolute;
  left:0;
  color:var(--accent);
  font-weight:900;
}

.note{
  margin-top:8px;
  color:var(--muted);
  font-size:.95rem;
}

.pricebox{
  border:1px dashed var(--border);
  border-radius:14px;
  padding:12px;
  background:#fffafc;
}
.price{ font-weight:900; }

.example{
  margin-top:10px;
  padding:10px 12px;
  border-left:4px solid var(--accent);
  background:#fff7fb;
  border-radius:10px;
}

/* å°ç·šãƒœã‚¿ãƒ³ */
.link-grid{
  display:grid;
  gap:10px;
  margin-top:14px;
}

/* ãƒ«ãƒ¼ãƒ«2ã¤ã¯æ¨ªä¸¦ã³ï¼ˆå°ç”»é¢ã¯ç¸¦ï¼‰ */
.rules-row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
@media (max-width:560px){
  .rules-row{grid-template-columns:1fr;}
}

.score-link,
.rules-link,
.yaku-link,
.match-link{
  display:block;
  padding:16px 14px;
  text-align:center;
  text-decoration:none;
  font-weight:900;
  border-radius:18px;
  color:#fff;
  transition:transform .25s ease, box-shadow .25s ease, filter .25s ease;
  position:relative;
  overflow:hidden;
  will-change:transform;
}
.score-link:hover,
.rules-link:hover,
.yaku-link:hover,
.match-link:hover{
  transform:translateY(-4px);
  box-shadow:0 12px 24px rgba(0,0,0,.14);
  filter:saturate(1.05) brightness(1.02);
}
.score-link:active,
.rules-link:active,
.yaku-link:active,
.match-link:active{
  transform:translateY(-1px);
  box-shadow:0 8px 18px rgba(0,0,0,.12);
}
.score-link::after,
.rules-link::after,
.yaku-link::after,
.match-link::after{
  content:"";
  position:absolute;
  top:0;
  left:-75%;
  width:50%;
  height:100%;
  background:linear-gradient(120deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.38) 50%, rgba(255,255,255,0) 100%);
  transform:skewX(-25deg);
  pointer-events:none;
}
.score-link:hover::after,
.rules-link:hover::after,
.yaku-link:hover::after,
.match-link:hover::after{
  animation:shine .85s forwards;
}
@keyframes shine{ 100%{left:125%;} }

.score-link{ background:linear-gradient(135deg,#c084fc,#a855f7); }
.rules-link{ background:linear-gradient(135deg,#60a5fa,#38bdf8); }
.yaku-link{ background:linear-gradient(135deg,#94a3b8,#64748b); }
.match-link{ background:linear-gradient(135deg,#34d399,#10b981); }

.cta{
  display:block;
  margin-top:14px;
  padding:14px 12px;
  text-align:center;
  text-decoration:none;
  font-weight:900;
  color:#fff;
  border-radius:16px;
  background:linear-gradient(135deg,#ff7aa8,#ffb3cd);
  transition:transform .25s ease, box-shadow .25s ease, filter .25s ease;
}
.cta:hover{
  transform:translateY(-3px);
  box-shadow:0 12px 24px rgba(0,0,0,.14);
  filter:saturate(1.05) brightness(1.02);
}
.cta:active{
  transform:translateY(-1px);
  box-shadow:0 8px 18px rgba(0,0,0,.12);
}
.cta small{
  display:block;
  font-weight:700;
  opacity:.95;
  margin-top:2px;
}

footer{
  text-align:center;
  color:var(--muted);
  font-size:.86rem;
  padding:18px 10px 26px;
}

/* ===== æ–™é‡‘ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ ===== */
.sim{
  background:#ffffff;
  border:1px solid var(--border);
  border-radius:16px;
  padding:14px 14px 12px;
}
.sim-grid{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:10px;
}
@media (max-width:720px){
  .sim-grid{ grid-template-columns:1fr; }
}
.field{
  background:#fffafc;
  border:1px dashed var(--border);
  border-radius:14px;
  padding:10px;
}
.field label{
  display:block;
  font-weight:900;
  margin-bottom:6px;
}
.field input, .field select{
  width:100%;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid #f1c2d7;
  font-size:16px;
  outline:none;
  background:#fff;
}
.field input:focus, .field select:focus{
  border-color:rgba(222,63,123,.55);
  box-shadow:0 0 0 4px rgba(222,63,123,.12);
}

.sim-actions{
  display:flex;
  gap:10px;
  margin-top:10px;
  flex-wrap:wrap;
}
.btn{
  border:0;
  cursor:pointer;
  padding:12px 14px;
  border-radius:14px;
  font-weight:900;
  color:#fff;
  background:linear-gradient(135deg,#ff7aa8,#ffb3cd);
  transition:transform .2s ease, box-shadow .2s ease, filter .2s ease;
}
.btn:hover{ transform:translateY(-2px); box-shadow:0 10px 18px rgba(0,0,0,.12); filter:saturate(1.05) brightness(1.02); }
.btn:active{ transform:translateY(-1px); box-shadow:0 8px 14px rgba(0,0,0,.10); }
.btn.secondary{ background:linear-gradient(135deg,#94a3b8,#64748b); }

/* åˆ†ãƒ—ãƒªã‚»ãƒƒãƒˆ */
.presets{
  margin-top:10px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.pbtn{
  border:1px solid rgba(222,63,123,.25);
  background:#fff7fb;
  color:#7a2a43;
  font-weight:900;
  padding:9px 12px;
  border-radius:999px;
  cursor:pointer;
  transition:transform .18s ease, box-shadow .18s ease, filter .18s ease;
}
.pbtn:hover{ transform:translateY(-2px); box-shadow:0 10px 16px rgba(0,0,0,.10); filter:saturate(1.02) brightness(1.01); }
.pbtn:active{ transform:translateY(-1px); box-shadow:0 8px 12px rgba(0,0,0,.08); }
.pbtn[aria-pressed="true"]{
  background:linear-gradient(135deg,#ff7aa8,#ffb3cd);
  color:#fff;
  border-color:transparent;
}

.result{
  margin-top:12px;
  padding:12px;
  border-radius:14px;
  background:#fff7fb;
  border-left:4px solid var(--accent);
}
.result .total{
  font-size:1.2rem;
  font-weight:900;
}
.mini{
  color:var(--muted);
  font-size:.92rem;
  margin-top:6px;
}
.breakdown{
  margin-top:8px;
  font-size:.98rem;
}
.breakdown b{ font-weight:900; }

/* å‰²ã‚Šå‹˜ï¼ˆã”ä¸»äººæ§˜ã®ã¿ï¼‰ */
.split{
  margin-top:10px;
  padding:10px;
  border-radius:14px;
  background:#fffafc;
  border:1px dashed var(--border);
}
.split .row{
  display:flex;
  flex-wrap:wrap;
  gap:8px 14px;
  align-items:center;
}
.split .label{ font-weight:900; }
.split .per{
  font-weight:900;
  font-size:1.08rem;
}
.split small{ color:var(--muted); }

.warn{
  margin-top:8px;
  padding:10px 12px;
  border-radius:12px;
  background:#fff3f6;
  border:1px solid rgba(222,63,123,.25);
  color:#7a2a43;
  font-weight:800;
}
</style>
</head>

<body>

<header>
  <div class="badge">ãƒãƒ»ãƒˆãƒ­ æ–°ã‚µãƒ¼ãƒ“ã‚¹</div>
  <h1>ğŸ€„ ãƒ¡ã‚¤ãƒ‰ã•ã‚“ã¨æ¥½ã—ã‚€å¥å…¨éº»é›€ ğŸ€„</h1>
  <p>ãƒãƒ»ãƒˆãƒ­ã§ã—ã‹ä½“é¨“ã§ããªã„ã€ç‰¹åˆ¥ãªéº»é›€TIME</p>
</header>

<main>

  <section>
    <h2>ã‚µãƒ¼ãƒ“ã‚¹æ¦‚è¦</h2>
    <p>
      å…¨è‡ªå‹•éº»é›€å“ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ¡ã‚¤ãƒ‰ã•ã‚“ã¨ä¸€ç·’ã«éº»é›€ã‚’æ¥½ã—ã‚ã‚‹ãƒãƒ»ãƒˆãƒ­ã®æ–°ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆã§ã™ã€‚<br>
      ç‚¹æ•°è¨ˆç®—ãŒä¸å®‰ãªæ–¹ã‚„ã€ä¹…ã—ã¶ã‚Šã«éº»é›€ã‚’ã™ã‚‹æ–¹ã§ã‚‚ã€ã‚†ã£ãŸã‚Šãƒ»æ¥½ã—ãéŠã‚“ã§ã„ãŸã ã‘ã¾ã™ã€‚
    </p>
    <ul class="checks">
      <li>å…¨è‡ªå‹•éº»é›€å“ä½¿ç”¨</li>
      <li>åˆå¿ƒè€…OK</li>
      <li>ãƒ«ãƒ¼ãƒ«èª¬æ˜ãƒ»é€²è¡Œã‚µãƒãƒ¼ãƒˆã‚ã‚Š</li>
      <li>ã”ä¸»äººæ§˜ã®ã¿ã§ã®ã”åˆ©ç”¨ã‚‚å¯èƒ½ã§ã™ï¼ˆè²¸å“åˆ©ç”¨å¯¾å¿œï¼‰</li>
      <li>ä¸‰äººæ‰“ã¡ï¼ˆã‚µãƒ³ãƒï¼‰å¯¾å±€ã«ã‚‚å¯¾å¿œã—ã¦ãŠã‚Šã¾ã™</li>
    </ul>
  </section>

  <section>
    <h2>ã”åˆ©ç”¨æ–¹æ³•ï¼ˆäºˆç´„å¿…é ˆï¼‰</h2>
    <p><strong>ã”åˆ©ç”¨æ—¥å‰æ—¥ã¾ã§ã«ã€Xã®DMã«ã¦ã”äºˆç´„ãã ã•ã„ã€‚</strong></p>
    <ul>
      <li>ã€Œéº»é›€ã‚·ã‚¹ãƒ†ãƒ åˆ©ç”¨å¸Œæœ›ã€ã®æ—¨</li>
      <li>ã”å¸Œæœ›æ—¥æ™‚</li>
      <li>ã”åˆ©ç”¨æ™‚é–“ï¼ˆåˆå›120åˆ†ã€œï¼å»¶é•·ã¯30åˆ†ã€œï¼‰</li>
      <li>ã”åˆ©ç”¨äººæ•°ï¼ˆã”ä¸»äººæ§˜ï¼ãŠå¬¢æ§˜ã®äººæ•°ï¼‰</li>
      <li>ãƒ¡ã‚¤ãƒ‰ã•ã‚“åŒå“ã®æœ‰ç„¡ï¼ˆåŒå“ã®å ´åˆï¼šäººæ•° â€»æœ€å¤§2åã¾ã§ï¼‰</li>
    </ul>
    <p class="note">ç©ºãçŠ¶æ³ã‚’ç¢ºèªã®ã†ãˆã€ã”è¿”ä¿¡ã„ãŸã—ã¾ã™ã€‚</p>
  </section>

  <section>
    <h2>æ–™é‡‘æ¡ˆå†…</h2>

    <!-- â˜… æ–™é‡‘ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ -->
    <div class="sim" id="simulator">
      <p class="price" style="margin:0 0 8px;">ğŸ’° æ–™é‡‘ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆå…¥åŠ›ã™ã‚‹ã¨è‡ªå‹•è¨ˆç®—ï¼‰</p>

      <div class="sim-grid">
        <div class="field">
          <label for="guests">ã”ä¸»äººæ§˜ã®äººæ•°</label>
          <input id="guests" type="number" inputmode="numeric" min="1" max="12" step="1" value="3" aria-describedby="guestsHelp">
          <div class="mini" id="guestsHelp">1äººä»¥ä¸Šã§å…¥åŠ›ï¼ˆä¾‹ï¼š3ï¼‰</div>
        </div>

        <div class="field">
          <label for="maids">ãƒ¡ã‚¤ãƒ‰ã•ã‚“ã®äººæ•°</label>
          <select id="maids" aria-describedby="maidsHelp">
            <option value="0">0åï¼ˆåŒå“ãªã—ï¼‰</option>
            <option value="1" selected>1å</option>
            <option value="2">2åï¼ˆæœ€å¤§ï¼‰</option>
          </select>
          <div class="mini" id="maidsHelp">åŒå“ã¯æœ€å¤§2åã¾ã§</div>
        </div>

        <div class="field">
          <label for="minutes">ã”åˆ©ç”¨æ™‚é–“ï¼ˆåˆ†ï¼‰</label>
          <input id="minutes" type="number" inputmode="numeric" min="30" max="720" step="10" value="120" aria-describedby="minutesHelp">
          <div class="mini" id="minutesHelp">30åˆ†ä»¥ä¸Šã€‚30åˆ†å˜ä½ã§åˆ‡ã‚Šä¸Šã’è¨ˆç®—</div>

          <!-- â˜… åˆ†ãƒ—ãƒªã‚»ãƒƒãƒˆ -->
          <div class="presets" role="group" aria-label="åˆ©ç”¨æ™‚é–“ãƒ—ãƒªã‚»ãƒƒãƒˆ">
            <button class="pbtn" type="button" data-min="120" aria-pressed="true">120</button>
            <button class="pbtn" type="button" data-min="150" aria-pressed="false">150</button>
            <button class="pbtn" type="button" data-min="180" aria-pressed="false">180</button>
            <button class="pbtn" type="button" data-min="210" aria-pressed="false">210</button>
            <button class="pbtn" type="button" data-min="240" aria-pressed="false">240</button>
            <button class="pbtn" type="button" data-min="270" aria-pressed="false">270</button>
            <button class="pbtn" type="button" data-min="300" aria-pressed="false">300</button>
          </div>
          <div class="mini">â€»æŠ¼ã™ã¨åˆ†å…¥åŠ›ãŒåˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™</div>
        </div>
      </div>

      <div class="sim-actions">
        <button class="btn" type="button" id="calcBtn">è¨ˆç®—ã™ã‚‹</button>
        <button class="btn secondary" type="button" id="resetBtn">ãƒªã‚»ãƒƒãƒˆ</button>
      </div>

      <div class="result" aria-live="polite">
        <div class="total">åˆè¨ˆï¼š<span id="total">â€”</span></div>
        <div class="mini" id="meta">â€”</div>
        <div class="breakdown" id="breakdown"></div>

        <!-- â˜… å‰²ã‚Šå‹˜ï¼ˆã”ä¸»äººæ§˜ã®ã¿ï¼‰ -->
        <div class="split">
          <div class="row">
            <span class="label">ã”ä¸»äººæ§˜ 1äººã‚ãŸã‚Šï¼š</span>
            <span class="per" id="perGuest">â€”</span>
            <small id="perGuestNote">â€”</small>
          </div>
          <div class="mini">â€»ç«¯æ•°ã¯ã€Œå††å˜ä½ã€ã§åˆ‡ã‚Šä¸Šã’è¡¨ç¤ºï¼ˆåˆè¨ˆã¨ä¸€è‡´ã—ãªã„å ´åˆã¯ç«¯æ•°èª¿æ•´ã§å¯¾å¿œã—ã¦ãã ã•ã„ï¼‰</div>
        </div>

        <div class="warn" id="warn" style="display:none;"></div>
      </div>

      <div class="mini" style="margin-top:8px;">
        <b>è¨ˆç®—ãƒ«ãƒ¼ãƒ«ï¼š</b>å“ä»£ 2,000å††ï¼ˆåˆå›ã®ã¿ï¼‰ï¼3æ™‚é–“ä»¥ä¸Šã§å“ä»£ç„¡æ–™ï¼ã”ä¸»äººæ§˜ 30åˆ†1,000å††/äººï¼ãƒ¡ã‚¤ãƒ‰åŒå“ 30åˆ†1,000å††/äººï¼ˆæœ€å¤§2åï¼‰ï¼30åˆ†å˜ä½ã§åˆ‡ã‚Šä¸Šã’
      </div>
    </div>
    <!-- â˜… ã“ã“ã¾ã§ -->

    <div class="pricebox" style="margin-top:14px;">
      <p class="price">â–  åˆå›ã”åˆ©ç”¨ï¼š120åˆ†ã€œ</p>
      <p class="price">â–  ã”å»¶é•·ï¼š30åˆ†ã€œï¼ˆ30åˆ†å˜ä½ï¼‰</p>
      <p class="note">â€»è¡¨ç¤ºã¯ã™ã¹ã¦ç¨è¾¼ã§ã™ã€‚</p>
    </div>

    <div class="pricebox" style="margin-top:12px;">
      <p class="price">â‘  å…¨è‡ªå‹•éº»é›€å“è²¸å‡ºæ–™ï¼š2,000å††ï¼ˆç¨è¾¼ï¼‰</p>
      <p class="note">â€»åˆå›ã®ã¿ç™ºç”Ÿã—ã¾ã™ã€‚å»¶é•·æ™‚ã¯å†ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚</p>
      <p class="note">â€»<strong>3æ™‚é–“ä»¥ä¸Šã®ã”åˆ©ç”¨äºˆç´„ã§ã€è²¸å‡ºæ–™ã¯ç„¡æ–™</strong>ã¨ãªã‚Šã¾ã™ã€‚</p>

      <p class="price" style="margin-top:10px;">â‘¡ ã”ä¸»äººæ§˜ï¼š30åˆ† 1,000å††ï¼ˆç¨è¾¼ï¼‰ï¼äºº</p>
      <p class="note">â€»é€šå¸¸æ–™é‡‘ã¨åŒæ§˜ã®æ™‚é–“åˆ¶æ–™é‡‘ã§ã™ã€‚</p>

      <p class="price" style="margin-top:10px;">â‘¢ ãƒ¡ã‚¤ãƒ‰ã•ã‚“åŒå“æ–™ï¼š30åˆ† 1,000å††ï¼ˆç¨è¾¼ï¼‰ï¼äºº</p>
      <p class="note">â€»åŒå“ã§ãã‚‹ãƒ¡ã‚¤ãƒ‰ã¯æœ€å¤§2åã¾ã§ã€‚</p>
    </div>

    <div class="example">
      <strong>æ–™é‡‘ä¾‹</strong><br>
      ğŸ‘‘ ã”ä¸»äººæ§˜3åï¼‹ãƒ¡ã‚¤ãƒ‰ã•ã‚“1åï¼120åˆ†ï¼ˆ2æ™‚é–“ï¼‰ã®å ´åˆ<br><br>
      å“ä»£ï¼š2,000å††<br>
      ã”ä¸»äººæ§˜3åï¼š1,000å†† Ã— 4ï¼ˆ30åˆ†å˜ä½ï¼‰ Ã— 3å ï¼ 12,000å††<br>
      ãƒ¡ã‚¤ãƒ‰ã•ã‚“1ååŒå“æ–™ï¼š1,000å†† Ã— 4 ï¼ 4,000å††<br><br>
      âœ… åˆè¨ˆï¼š<strong>18,000å††ï¼ˆç¨è¾¼ï¼‰</strong><br>
      <span class="note">â€»120åˆ†ã¯ã€Œ30åˆ†Ã—4æ ã€ã¨ã—ã¦è¨ˆç®—ã—ã¾ã™ã€‚</span>
    </div>

    <div class="link-grid">
      <a class="score-link" href="mahjong-score.html">ğŸ€„ ãƒãƒ»ãƒˆãƒ­ç‹¬è‡ªã®ç°¡æ˜“ç‚¹æ•°è¨ˆç®—ã‚’è¦‹ã‚‹</a>

      <div class="rules-row">
        <a class="rules-link" href="mahjong-rules.html">ğŸ“˜ å››äººæ‰“ã¡å¯¾å±€ãƒ«ãƒ¼ãƒ«ã‚’è¦‹ã‚‹</a>
        <a class="rules-link" href="rule-3player.html">ğŸ“˜ ä¸‰äººæ‰“ã¡å¯¾å±€ãƒ«ãƒ¼ãƒ«ã‚’è¦‹ã‚‹</a>
      </div>

      <a class="yaku-link" href="mahjong-yaku.html">ğŸ§¾ æ¡ç”¨å½¹ä¸€è¦§ã‚’è¦‹ã‚‹</a>
      <a class="match-link" href="mahjong-lobby.html">ğŸ‘ª é¢å­å‹Ÿé›†ã‚’è¦‹ã‚‹</a>
    </div>
  </section>

  <section>
    <h2>æ³¨æ„äº‹é …</h2>
    <ul>
      <li>å¥å…¨ãªã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹ã§ã™</li>
      <li>é‡‘éŠ­ã®ã‚„ã‚Šå–ã‚Šãƒ»è³­åšè¡Œç‚ºã¯ç¦æ­¢ã§ã™</li>
      <li>ãŠå±‹æ•·ã®å“ã‚’å¤§åˆ‡ã«ã™ã‚‹ãŸã‚ã€å¼·æ‰“ã¯ã”é æ…®ãã ã•ã„ã€‚â€»ç‰Œã¯ãã£ã¨å„ªã—ãç½®ã„ã¦ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚</li>
      <li>ä»–ã®ãŠå®¢æ§˜ã®ã”è¿·æƒ‘ã«ãªã‚‹è¡Œç‚ºã¯ã”é æ…®ãã ã•ã„</li>
      <li>ãƒ¡ã‚¤ãƒ‰ã•ã‚“ã¸ã®éåº¦ãªè¦æ±‚ã¯ç¦æ­¢ã§ã™</li>
    </ul>
  </section>

  <a class="cta" href="https://twitter.com/messages/compose?recipient_id=1161961177749999617">
    Xã®DMã§äºˆç´„ã™ã‚‹
    <small>ï¼ˆå‰æ—¥ã¾ã§ã«ã”äºˆç´„ãã ã•ã„ï¼‰</small>
  </a>

</main>

<footer>
  concept cafe POãƒ»TORO
</footer>

<script>
(function(){
  // === æ–™é‡‘è¨­å®šï¼ˆæ”¹å®šç‰ˆï¼‰ ===
  const RATE_PER_30_GUEST = 1000;   // ã”ä¸»äººæ§˜ 30åˆ†/äºº
  const RATE_PER_30_MAID  = 1000;   // ãƒ¡ã‚¤ãƒ‰åŒå“ 30åˆ†/äºº
  const TABLE_FEE         = 2000;   // å“ä»£ï¼ˆåˆå›ã®ã¿ï¼‰
  const TABLE_FREE_MIN    = 180;    // 3æ™‚é–“ä»¥ä¸Šã§å“ä»£ç„¡æ–™
  const MAID_MAX          = 2;

  const $ = (id)=>document.getElementById(id);
  const guestsEl = $("guests");
  const maidsEl  = $("maids");
  const minutesEl= $("minutes");

  const totalEl  = $("total");
  const metaEl   = $("meta");
  const breakdownEl = $("breakdown");
  const warnEl   = $("warn");

  const perGuestEl = $("perGuest");
  const perGuestNoteEl = $("perGuestNote");

  const presetButtons = Array.from(document.querySelectorAll(".pbtn"));

  function yen(n){
    return n.toLocaleString("ja-JP") + "å††";
  }
  function ceilTo30(min){
    return Math.ceil(min / 30) * 30;
  }

  function setPressedPresetFromMinutes(min){
    presetButtons.forEach(btn=>{
      const v = Number(btn.dataset.min);
      btn.setAttribute("aria-pressed", String(v === min));
    });
  }

  function calc(){
    warnEl.style.display = "none";
    warnEl.textContent = "";

    let guests = Number(guestsEl.value);
    let maids  = Number(maidsEl.value);
    let minutes= Number(minutesEl.value);

    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    if(!Number.isFinite(guests) || guests < 1){
      guests = 1; guestsEl.value = 1;
      warnEl.textContent = "ã”ä¸»äººæ§˜äººæ•°ã¯1åä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";
      warnEl.style.display = "block";
    }
    if(!Number.isFinite(maids) || maids < 0) maids = 0;
    if(maids > MAID_MAX){
      maids = MAID_MAX;
      maidsEl.value = String(MAID_MAX);
      warnEl.textContent = "ãƒ¡ã‚¤ãƒ‰ã•ã‚“åŒå“ã¯æœ€å¤§2åã¾ã§ã§ã™ã€‚2åã«è£œæ­£ã—ã¾ã—ãŸã€‚";
      warnEl.style.display = "block";
    }
    if(!Number.isFinite(minutes) || minutes < 30){
      minutes = 30; minutesEl.value = 30;
      warnEl.textContent = "ã”åˆ©ç”¨æ™‚é–“ã¯30åˆ†ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";
      warnEl.style.display = "block";
    }

    const billedMinutes = ceilTo30(minutes);
    const slots = billedMinutes / 30;

    const tableFee = (minutes >= TABLE_FREE_MIN) ? 0 : TABLE_FEE;
    const guestsFee = RATE_PER_30_GUEST * slots * guests;
    const maidsFee  = RATE_PER_30_MAID  * slots * maids;
    const total = tableFee + guestsFee + maidsFee;

    totalEl.textContent = yen(total);
    metaEl.textContent =
      `å…¥åŠ›ï¼š${minutes}åˆ† â†’ è«‹æ±‚ã¯${billedMinutes}åˆ†ï¼ˆ30åˆ†Ã—${slots}æ ï¼‰ï¼ã”ä¸»äººæ§˜${guests}åãƒ»ãƒ¡ã‚¤ãƒ‰${maids}å`;

    breakdownEl.innerHTML =
      `å†…è¨³ï¼šå“ä»£ <b>${yen(tableFee)}</b> ï¼‹ ã”ä¸»äººæ§˜ <b>${yen(guestsFee)}</b> ï¼‹ ãƒ¡ã‚¤ãƒ‰åŒå“ <b>${yen(maidsFee)}</b>`;

    // å“ä»£ã®æ³¨æ„å–šèµ·
    if(minutes < TABLE_FREE_MIN){
      const remain = TABLE_FREE_MIN - minutes;
      const msg = `ã‚ã¨${remain}åˆ†ã§ã€Œ3æ™‚é–“ä»¥ä¸Šã€ã«ãªã‚Šã€å“ä»£ãŒç„¡æ–™ã«ãªã‚Šã¾ã™ã€‚`;
      warnEl.textContent = warnEl.style.display === "block"
        ? (warnEl.textContent + " " + msg)
        : msg;
      warnEl.style.display = "block";
    }

    // åˆ†ãƒ—ãƒªã‚»ãƒƒãƒˆã®æŠ¼ä¸‹çŠ¶æ…‹ï¼ˆæ‰‹å…¥åŠ›ã§ã‚‚è¿½å¾“ï¼‰
    setPressedPresetFromMinutes(minutes);

    // å‰²ã‚Šå‹˜ï¼ˆã”ä¸»äººæ§˜ã®ã¿ï¼‰
    const divisor = guests;
    const per = Math.ceil(total / divisor); // å††å˜ä½ã§åˆ‡ã‚Šä¸Šã’
    perGuestEl.textContent = yen(per);
    perGuestNoteEl.textContent = `ï¼ˆã”ä¸»äººæ§˜${divisor}åã§å‰²ã‚‹ï¼‰`;
  }

  function reset(){
    guestsEl.value = 3;
    maidsEl.value = 1;
    minutesEl.value = 120;

    totalEl.textContent = "â€”";
    metaEl.textContent = "â€”";
    breakdownEl.textContent = "";
    warnEl.style.display = "none";
    warnEl.textContent = "";

    perGuestEl.textContent = "â€”";
    perGuestNoteEl.textContent = "â€”";

    setPressedPresetFromMinutes(120);
    calc();
  }

  $("calcBtn").addEventListener("click", calc);
  $("resetBtn").addEventListener("click", reset);

  // åˆ†ãƒ—ãƒªã‚»ãƒƒãƒˆ
  presetButtons.forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const v = Number(btn.dataset.min);
      minutesEl.value = String(v);
      setPressedPresetFromMinutes(v);
      calc();
    });
  });

  // å…¥åŠ›å³æ™‚åæ˜ 
  [guestsEl, maidsEl, minutesEl].forEach(el=>{
    el.addEventListener("input", calc);
    el.addEventListener("change", calc);
  });

  setPressedPresetFromMinutes(Number(minutesEl.value));
  calc();
})();
</script>

</body>
</html>
